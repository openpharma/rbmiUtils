<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Utility Functions to Support and Extend the rbmi Package • rbmiUtils</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Utility Functions to Support and Extend the rbmi Package">
<meta name="description" content="Provides utility functions that extend the capabilities of the rbmi package to support clinical trial analysis workflows. Includes tools for manipulating imputed data, applying analysis methods across imputations, and generating output compatible with clinical data standards.">
<meta property="og:description" content="Provides utility functions that extend the capabilities of the rbmi package to support clinical trial analysis workflows. Includes tools for manipulating imputed data, applying analysis methods across imputations, and generating output compatible with clinical data standards.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rbmiUtils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/analyse2.html">Storing and Analyzing Imputed Data with rbmiUtils</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/openpharma/rbmiUtils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rbmiutils">rbmiUtils<a class="anchor" aria-label="anchor" href="#rbmiutils"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of rbmiUtils is to provide additional functionality to {rbmi} for clinical trial analysis and reporting. This package is currently under development and is not yet available on CRAN.</p>
<div class="section level2">
<h2 id="local-installation-for-beta-testing-only">Local installation (for beta-testing only)<a class="anchor" aria-label="anchor" href="#local-installation-for-beta-testing-only"></a>
</h2>
<p>You can install the latest version of <strong>rbmiUtils</strong> from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"openpharma/rbmiUtils"</span><span class="op">)</span></span></code></pre></div>
<p>After the official release, the package installation will differ.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a basic example which shows you how to solve a common problem:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example usage:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/rbmi/" class="external-link">rbmi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://openpharma.github.io/rbmiUtils/">rbmiUtils</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"ADMI"</span><span class="op">)</span></span>
<span><span class="va">N_IMPUTATIONS</span> <span class="op">&lt;-</span> <span class="fl">100</span></span>
<span><span class="va">WARMUP</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span><span class="va">THIN</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Convert key columns to factors</span></span>
<span><span class="va">ADMI</span><span class="op">$</span><span class="va">TRT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ADMI</span><span class="op">$</span><span class="va">TRT</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Placebo"</span>, <span class="st">"Drug A"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ADMI</span><span class="op">$</span><span class="va">USUBJID</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ADMI</span><span class="op">$</span><span class="va">USUBJID</span><span class="op">)</span></span>
<span><span class="va">ADMI</span><span class="op">$</span><span class="va">AVISIT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ADMI</span><span class="op">$</span><span class="va">AVISIT</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define key variables for ANCOVA analysis</span></span>
<span> <span class="va">vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rbmi/reference/set_vars.html" class="external-link">set_vars</a></span><span class="op">(</span></span>
<span>  subjid <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>  visit <span class="op">=</span> <span class="st">"AVISIT"</span>,</span>
<span>  group <span class="op">=</span> <span class="st">"TRT"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"CHG"</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BASE"</span>, <span class="st">"STRATA"</span>, <span class="st">"REGION"</span><span class="op">)</span>  <span class="co"># Covariates for adjustment</span></span>
<span> <span class="op">)</span></span>
<span></span>
<span><span class="co"># Specify the imputation method (i.e Bayesian) - needed for pool step</span></span>
<span><span class="va">method</span> <span class="op">&lt;-</span> <span class="fu">rbmi</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/rbmi/reference/method.html" class="external-link">method_bayes</a></span><span class="op">(</span></span>
<span>    n_samples <span class="op">=</span> <span class="va">N_IMPUTATIONS</span>,</span>
<span>    control <span class="op">=</span> <span class="fu">rbmi</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/rbmi/reference/control.html" class="external-link">control_bayes</a></span><span class="op">(</span></span>
<span>      warmup <span class="op">=</span> <span class="va">WARMUP</span>,</span>
<span>      thin <span class="op">=</span> <span class="va">THIN</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform ANCOVA Analysis on Each Imputed Dataset</span></span>
<span><span class="va">ana_obj_ancova</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/analyse_mi_data.html">analyse_mi_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">ADMI</span>,</span>
<span>  vars <span class="op">=</span> <span class="va">vars</span>,</span>
<span>  method <span class="op">=</span> <span class="va">method</span>,</span>
<span>  fun <span class="op">=</span> <span class="va">ancova</span>,  <span class="co"># Apply ANCOVA</span></span>
<span>  delta <span class="op">=</span> <span class="cn">NULL</span>   <span class="co"># No sensitivity analysis adjustment</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">pool_obj_ancova</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rbmi/reference/pool.html" class="external-link">pool</a></span><span class="op">(</span><span class="va">ana_obj_ancova</span><span class="op">)</span></span>
<span><span class="va">tidy_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/tidy_pool_obj.html">tidy_pool_obj</a></span><span class="op">(</span><span class="va">pool_obj_ancova</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print tidy data frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">tidy_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 10</span></span>
<span><span class="co">#&gt;   parameter       description visit parameter_type lsm_type     est    se    lci</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 trt_Week 24     Treatment … Week… trt            &lt;NA&gt;     -2.17   0.182 -2.53 </span></span>
<span><span class="co">#&gt; 2 lsm_ref_Week 24 Least Squa… Week… lsm            ref       0.0782 0.131 -0.179</span></span>
<span><span class="co">#&gt; 3 lsm_alt_Week 24 Least Squa… Week… lsm            alt      -2.09   0.126 -2.34 </span></span>
<span><span class="co">#&gt; 4 trt_Week 48     Treatment … Week… trt            &lt;NA&gt;     -3.81   0.256 -4.31 </span></span>
<span><span class="co">#&gt; 5 lsm_ref_Week 48 Least Squa… Week… lsm            ref       0.0481 0.185 -0.316</span></span>
<span><span class="co">#&gt; 6 lsm_alt_Week 48 Least Squa… Week… lsm            alt      -3.76   0.176 -4.11 </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: uci &lt;dbl&gt;, pval &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/openpharma/rbmiUtils/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/openpharma/rbmiUtils/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rbmiUtils</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mark Baillie <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-5618-0667" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Tobias Mütze <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4111-1941" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Jack Talboys <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Baillie, Tobias Mütze, Jack Talboys.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
